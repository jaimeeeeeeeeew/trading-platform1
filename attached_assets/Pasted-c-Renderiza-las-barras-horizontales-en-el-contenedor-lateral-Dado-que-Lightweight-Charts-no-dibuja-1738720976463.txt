c. Renderiza las barras horizontales en el contenedor lateral

Dado que Lightweight Charts no dibuja elementos fuera de su canvas, se recomienda usar HTML/CSS para crear el perfil de volumen. Sigue estos pasos:

    Calcula la escala vertical:
    Usa la altura del contenedor y el rango de precios para ubicar cada barra en la posición correcta. Puedes usar un mapeo lineal.

function priceToTop(price, containerHeight) {
  // Mapea el precio al contenedor (asumiendo que el rango es [minPrice, maxPrice])
  return ((maxPrice - price) / (maxPrice - minPrice)) * containerHeight;
}

Determina el ancho relativo de cada barra:
Encuentra el volumen máximo de los bins para escalar el ancho de las barras.

const maxVolume = Math.max(...Object.values(volumeProfile));

Renderiza las barras:

    function renderVolumeProfile() {
      const container = document.getElementById('volume-profile');
      container.innerHTML = ''; // Limpia contenido previo
      const containerHeight = container.clientHeight;
      
      for (const [priceStr, volume] of Object.entries(volumeProfile)) {
        const price = parseFloat(priceStr);
        const top = priceToTop(price, containerHeight);
        const barWidth = (volume / maxVolume) * 100; // Escala de 0 a 100px según el contenedor
        
        // Crea el div para la barra horizontal
        const bar = document.createElement('div');
        bar.style.position = 'absolute';
        bar.style.left = '0';
        bar.style.top = `${top}px`;
        bar.style.height = '4px'; // Grosor de la barra
        bar.style.width = `${barWidth}px`;
        bar.style.backgroundColor = 'rgba(0, 150, 136, 0.8)';
        
        // (Opcional) Agrega una etiqueta para el precio
        const label = document.createElement('span');
        label.style.position = 'absolute';
        label.style.left = `${barWidth + 5}px`;
        label.style.top = `${top - 6}px`;
        label.style.fontSize = '10px';
        label.textContent = price;
        
        container.appendChild(bar);
        container.appendChild(label);
      }
    }

    // Llama a la función para renderizar el perfil
    renderVolumeProfile();

d. Sincroniza el perfil con el gráfico

Si el usuario hace zoom o se desplaza en el gráfico, es posible que necesites actualizar el perfil de volumen. Lightweight Charts permite suscribirse a cambios en el rango visible, por ejemplo:

chart.subscribeVisibleLogicalRangeChange(() => {
  // Actualiza el perfil de volumen según el nuevo rango visible
  renderVolumeProfile();
});

Revisa la documentación para ver qué eventos están disponibles y cómo obtener el rango de precios visible si deseas una sincronización más precisa.